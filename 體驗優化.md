# 體驗優化總覽

> 統計自 commit `9396eb1` (v1.1.0) 之後的所有改進
> 分析日期：2025-12-13

---

## 📦 儲存與資料

- **檔案型儲存 (.whiteboard.json)** — 白板狀態改為實體檔案儲存，支援 Git 版本控制和專案可攜性
- **資料版本號** — 新增 `version` 欄位支援未來資料格式遷移，確保向後相容
- **Debounce 儲存優化** — 實作 500ms 延遲儲存 + Dirty Flag，避免頻繁存檔造成卡頓
- **立即儲存機制** — 刪除操作使用 `forceSave()` 確保資料立即寫入

---

## 🖱️ 點擊與互動

- **點擊範圍精確化** — Block 和 Card 的開檔範圍縮小至文字本身，避免拖曳時誤觸
- **防誤觸機制** — 需按住 `Cmd` (Mac) / `Ctrl` (Win) 再點擊才會開啟檔案
- **雙擊創建 Block** — 雙擊畫布空白處可快速建立新 Block
- **彈窗關閉優化** — 點擊背景或按 Escape 即可關閉檔案選擇器

---

## 🎯 選取與多選

- **矩形框選** — 在空白處拖曳可繪製選取框，框到的元素會被選取（只要交集即選取）
- **多選移動** — 選取多個元素後，拖曳任一選取元素可同時移動全部
- **Shift 加選** — 按住 Shift 點擊可切換元素選取狀態；框選時可追加選取
- **選中效果統一** — Block 與 Card 統一為白色外框 + 陰影的選中效果
- **Delete 快捷鍵** — 按 `Delete` / `Backspace` 可刪除所有選中的元素

---

## 🔍 縮放與平移

- **滑鼠中心縮放** — 縮放功能以滑鼠位置為中心，而非左上角
- **觸控板直接平移** — Mac 雙指滑動可直接平移畫布，無需空白鍵
- **畫布預設置中** — 白板載入時預設於中心位置，支援四向延展
- **多種平移方式** — 支援中鍵拖曳、Alt+拖曳、空白鍵+拖曳
- **編輯狀態平移控制** — 編輯 Card 時，滑鼠在 Card 範圍內禁用白板平移

---

## 🔗 檔案關聯

- **檔案重新命名同步** — .md 檔案重命名時自動更新 Card 和 Block 的連結
- **動態建立檔案** — 搜尋框無結果時可直接建立並連結新檔案
- **分割視窗開啟** — 按住 Option 點擊可於分割視窗開啟連結檔案
- **點擊空白離開編輯** — 點擊白板空白處自動退出所有編輯模式

---

## 🎨 視覺優化

- **色票精簡** — 預設色票改為 8 種深色調，確保白色文字清晰可讀
- **CSP 問題修復** — Lucide CDN 替換為內聯 SVG，解決安全策略問題
- **UI 升級** — 全面導入 Lucide Icons，提升介面質感
- **視覺回饋** — 選取元素顯示青色外框，選取框為虛線藍框
- **卡片滾動優先** — 編輯 Card 時，滾輪優先滾動卡片內容

---

## 📝 小結

從 v1.1.0 到 v1.3.0 共完成 **25+ 項體驗優化**，涵蓋：
- 儲存效能與可靠性
- 精確的點擊與防誤觸
- 多選框選與批次操作
- 流暢的縮放平移體驗
- 智慧的檔案關聯管理
- 統一且精緻的視覺效果
